<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BTi 世界盃合作計畫 - 手機優化版</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        body { background-color: #1a202c; color: white; font-family: sans-serif; margin: 0; padding: 0; }
        
        /* 修正 1：移除固定高度，改用自然高度 */
        .page-container { min-height: 100vh; display: flex; flex-direction: column; }

        /* 修正 2：確保熱區與圖片容器同步縮放 */
        .img-wrapper { 
            position: relative; 
            display: inline-block; 
            width: 100%; 
            max-width: 100%;
            line-height: 0; /* 消除圖片下方的間隙 */
        }
        .img-wrapper img { width: 100%; height: auto; }

        .hotspot { 
            position: absolute; 
            border: 2px dashed #fbbf24; 
            background: rgba(251, 191, 36, 0.2); 
            cursor: pointer; 
            z-index: 10;
        }

        /* 手機版浮動 Icon 縮小 */
        .floating-icon {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 60px; /* 手機版縮小 */
            height: 60px;
            z-index: 100;
            cursor: pointer;
            filter: drop-shadow(0 0 10px rgba(0,0,0,0.5));
        }
        @media (min-width: 768px) {
            .floating-icon { width: 100px; height: 100px; }
        }

        .info-panel { background: rgba(45, 55, 72, 0.95); border-left: 4px solid #f43f5e; padding: 12px; margin-bottom: 16px; font-size: 14px; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <!-- 浮動 Icon -->
    <img src="world_cup_icon.png" alt="WC Icon" class="floating-icon animate__animated animate__bounceIn" onclick="showModal()" id="fixed-icon">

    <div class="page-container">
        <!-- 頂部導覽 -->
        <nav class="bg-gray-900 p-4 border-b border-gray-800 flex justify-between items-center sticky top-0 z-[60]">
            <h1 class="text-sm font-bold text-rose-500">BTi World Cup Plan</h1>
            <button onclick="location.reload()" class="text-[10px] bg-gray-700 px-2 py-1 rounded">重置</button>
        </nav>

        <div class="p-4">
            <!-- STEP 1: 首頁 -->
            <div id="step-home">
                <div class="info-panel">
                    <p class="font-bold">方案 1 入口：</p>
                    <p class="text-xs text-gray-400">點擊下方 Banner 或左下角 Icon 進入</p>
                </div>

                <div class="img-wrapper rounded-lg overflow-hidden border border-gray-700">
                    <img src="home.png" alt="Home">
                    <!-- 熱區：對應 Banner 按鈕位置 -->
                    <div onclick="showModal()" class="hotspot" style="top: 10%; left: 5%; width: 40%; height: 20%;"></div>
                </div>
            </div>

            <!-- STEP 2: 對戰表 -->
            <div id="step-bracket" class="hidden animate__animated animate__fadeIn">
                <button onclick="resetToHome()" class="mb-4 text-xs text-blue-400 underline">← 返回首頁重選</button>
                <div class="info-panel border-blue-500">
                    <p class="font-bold">活動專區：</p>
                    <p class="text-xs text-gray-400">點擊中間的「Bet Now」或金色方框</p>
                </div>
                
                <div class="img-wrapper rounded-lg overflow-hidden shadow-2xl">
                    <img src="bracket.png" alt="Bracket">
                    <!-- 修正：熱區現在會根據圖片縮放 -->
                    <div onclick="showOdds()" class="hotspot" style="top: 45%; left: 42%; width: 16%; height: 8%;"></div>
                </div>
            </div>

            <!-- STEP 3: 最終頁 -->
            <div id="step-betting" class="hidden animate__animated animate__fadeIn">
                <button onclick="resetToHome()" class="mb-4 text-xs text-blue-400 underline">← 返回首頁</button>
                <div class="info-panel border-green-500">
                    <p class="font-bold">方案 2 / 完成：</p>
                    <p class="text-xs text-gray-400">已進入 BTi 世界盃盤口頁面</p>
                </div>
                <div class="img-wrapper">
                    <img src="betting_site.png" alt="Betting Site" class="rounded-lg shadow-2xl">
                </div>
            </div>
        </div>
    </div>

    <!-- 方案選擇彈窗 -->
    <div id="choice-modal" class="fixed inset-0 bg-black/95 z-[200] hidden flex items-center justify-center p-6">
        <div class="bg-gray-800 p-6 rounded-2xl w-full max-w-sm animate__animated animate__fadeInUp">
            <h2 class="text-xl font-bold mb-6 text-center">玩家點擊後路徑</h2>
            <div class="space-y-4">
                <button onclick="goToBracket()" class="w-full bg-rose-600 p-4 rounded-xl text-left font-bold transition active:scale-95">
                    方案 1：進入活動專區
                </button>
                <button onclick="goToBetting()" class="w-full border border-gray-600 p-4 rounded-xl text-left font-bold transition active:scale-95">
                    方案 2：直接進入盤口
                </button>
            </div>
            <button onclick="closeModal()" class="mt-6 w-full text-gray-500 text-sm">關閉</button>
        </div>
    </div>

    <!-- API 賠率小工具彈出 -->
    <div id="odds-popup" class="fixed bottom-0 left-0 w-full z-[150] hidden animate__animated animate__slideInUp">
        <div class="bg-gray-900 border-t-2 border-rose-500 p-4 shadow-2xl">
            <div class="flex justify-between items-center mb-2">
                <p class="text-xs font-bold text-rose-500">WHALE API 即時盤口</p>
                <button onclick="document.getElementById('odds-popup').classList.add('hidden')" class="text-gray-500 italic">✕</button>
            </div>
            <img src="odds_card.png" class="w-full rounded mb-4" onclick="goToBetting()">
            <p class="text-[10px] text-center text-gray-500">點擊上方賠率模擬帶入注單</p>
        </div>
    </div>

    <script>
        function showModal() { document.getElementById('choice-modal').classList.remove('hidden'); }
        function closeModal() { document.getElementById('choice-modal').classList.add('hidden'); }
        
        function goToBracket() {
            hideAll();
            document.getElementById('step-bracket').classList.remove('hidden');
            document.getElementById('fixed-icon').style.display = 'none';
        }

        function showOdds() {
            document.getElementById('odds-popup').classList.remove('hidden');
        }

        function goToBetting() {
            hideAll();
            document.getElementById('odds-popup').classList.add('hidden');
            document.getElementById('step-betting').classList.remove('hidden');
            document.getElementById('fixed-icon').style.display = 'none';
        }

        function resetToHome() {
            hideAll();
            document.getElementById('step-home').classList.remove('hidden');
            document.getElementById('fixed-icon').style.display = 'block';
        }

        function hideAll() {
            document.getElementById('step-home').classList.add('hidden');
            document.getElementById('step-bracket').classList.add('hidden');
            document.getElementById('step-betting').classList.add('hidden');
            closeModal();
            window.scrollTo(0,0);
        }
    </script>
</body>
</html>
